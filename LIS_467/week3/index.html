<!DOCTYPE html>
<html lang="en">
<head>
    <META CHARSET="UTF-8">
    <link href="style.css" rel="stylesheet"/>    
    <title>SW: TROS</title>
    <script>
        document.addEventListener('click', musicPlay);
        function musicPlay() {
            document.getElementById('audio-player').play();
            document.removeEventListener('click', musicPlay);
        }
    </script>
</head>
<body>

    <header class="page-header">
        <div class="marquee">
            <h1>Star Wars: The Rise Of Skywalker</h1>
        </div>
        <h2>A fan page</h2>
    </header>
    
    <nav>
        <h2 class="offscreen">Navigation menu</h2>
        <ul>
            <li><a href="#About">About the movie</a></li>
            <li><a href="#time">Time</a></li>
            <li><a href="#itemprop">Microdata</a></li>
            <li><a href="#video">Video</a></li>
            <li><a href="#details">Details and Summary</a></li>
            <li><a href="#webcam">Webcam & canvas</a></li>
        </ul>
    </nav>

    <main>
        <section>
            <h2 class="offscreen">The Rise of Skywalker</h2>
            <aside>
                C-3PO is a protocol droid specializing in human-cyborg relations. He was constructed by Anakin Skywalker prior to the year <time>32 BBY (Before the Battle of Yavin)</time>.
            </aside>
            <audio controls autoplay id="audio-player" class="offscreen">
                <source src="images/music.mp3" type="audio/mpeg">
            </audio>
            <article>
                <h3 class="About">About the movie</h3>
                <p>Star Wars, the Rise of Skywalker, is my absolute favorite Star Wars movie. This is because it heavily features the very best droid of all time: C-3PO.</p>
                <p>C-3PO is and has always been voiced by <span itemscope itemtype="http://schema.org/Person">Anthony Daniels (<a id="itemprop" href="https://twitter.com/ADaniels3PO" itemprop="url">@ADaniels3PO</a>).</span></p>
                <figure>
                    <img src="images/C-3PO.png" alt="An image of the best droid ever.">
                    <figcaption>The droid, the myth, the legend</figcaption>
                </figure>
                <p>The movie was released in the United States on <span id="time"><time datetime="2019-12-20">December 20, 2019</time></span></p>
            </article>
            <article>
                <h3>The Movie Trailer</h3>
                <video id="video" width="320" height="240" controls="controls">
                    <source src="images/trailer.mp4" type="video/mp4" />
                    <track src="images/trailer.vtt" kind="subtitles" srclang="en" default>
                    Your browser does not support the video element.
                </video>            
                 <p>As you can see, this is not the whole trailer for Star Wars: The Rise of Skywalker. However, it is far and away the most important part. In this trailer, C-3PO is made to sound as though he is about to die. This is why, presumably, he is taking one last look at all of his friends! The rest of the trailer is cool, but I just think it's most important that we know what is up with our favorite protocol droid at all times.</p>
            </article>
            <span id="details">
                <details>
                    <summary>My favorite part of Star Wars: The Rise of Skywalker (spoilers)</summary>
                    <p>C-3P0 doesn't die! I thought that he would, but he doesn't.</p>
                </details>
            </span>

            <article>
                <h3>About you</h3>
                <p>I know that I'm a big star wars fan, but probably you are too if you're reading my site! Why not take a picture of the number one star wars fan in your household so we can see how diverse we all are!</p>
                <video id="webcam"  width="640" height="480" autoplay></video>
                <button id="snap">Snap Photo</button>
                <canvas id="canvas" width="640" height="480"></canvas>

                <script>
                    // Grab elements, create settings, etc.
                    var video = document.getElementById('video');

                    // Get access to the camera!
                    if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                        // Not adding `{ audio: true }` since we only want video now
                        navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
                            //video.src = window.URL.createObjectURL(stream);
                            video.srcObject = stream;
                            video.play();
                        });
                    }
                    // Elements for taking the snapshot
                    var canvas = document.getElementById('canvas');
                    var context = canvas.getContext('2d');
                    var video = document.getElementById('webcam');
                    
                    var img3PO = document.createElement('img');
                    img3PO.src = 'images/C-3PO.png';

                    var coolFilter = document.createElement('img');
                    coolFilter.src = 'images/cool-filter.png';

                    // Trigger photo take
                    document.getElementById("snap").addEventListener("click", function() {
                        context.drawImage(video, 0, 0, 640, 480);
                        context.drawImage(img3PO, 0, 0, 320, 480);
                        context.drawImage(coolFilter, 0, 360, 640, 480);
                    });

                </script>
            </article>
        </section>
    </main>
    <footer>
        <p id="thanks">Thanks for being such a great Star Wars fan! Thank the Maker that you're here! If you have any comments, email the webmaster at <a href="mailto:StarWarsFan94xoxo@aol.com">StarWarsFan94xoxo@aol.com</a></p>
            <figure>
                <img src="images/visitor-counter.jpg" alt="A visitor counter">
            </figure>
        <p id="copyright">Copyright &copy; 1997 by Vicki Crosson. All rights reserved.</p>
    </footer>
</body>
</html>